* THS4561 - Rev. B
* Created by Hasan Babiker; February 07, 2020
* Created with Green-Williams-Lis Op Amp Macro-model Architecture
* Copyright 2020 by Texas Instruments Corporation
******************************************************
* MACRO-MODEL SIMULATED PARAMETERS:
******************************************************
* OPEN-LOOP GAIN AND PHASE VS. FREQUENCY  WITH RL, CL EFFECTS (Aol)
* UNITY GAIN BANDWIDTH (GBW)
* INPUT COMMON-MODE REJECTION RATIO VS. FREQUENCY (CMRR)
* POWER SUPPLY REJECTION RATIO VS. FREQUENCY (PSRR)
* DIFFERENTIAL INPUT IMPEDANCE (Zid)
* COMMON-MODE INPUT IMPEDANCE (Zic)
* OPEN-LOOP OUTPUT IMPEDANCE VS. FREQUENCY (Zo)
* OUTPUT CURRENT THROUGH THE SUPPLY (Iout)
* INPUT VOLTAGE NOISE DENSITY VS. FREQUENCY (en)
* INPUT CURRENT NOISE DENSITY VS. FREQUENCY (in)
* OUTPUT VOLTAGE SWING vs. OUTPUT CURRENT (Vo)
* SHORT-CIRCUIT OUTPUT CURRENT (Isc)
* QUIESCENT CURRENT (Iq)
* SETTLING TIME VS. CAPACITIVE LOAD (ts)
* SLEW RATE (SR)
* SMALL SIGNAL OVERSHOOT VS. CAPACITIVE LOAD
* LARGE SIGNAL RESPONSE
* OVERLOAD RECOVERY TIME (tor)
* INPUT BIAS CURRENT (Ib)
* INPUT OFFSET CURRENT (Ios)
* INPUT OFFSET VOLTAGE (Vos)
* INPUT OFFSET VOLTAGE VS. TEMPERATURE (Vos Drift)
* INPUT COMMON-MODE VOLTAGE RANGE (Vcm)
* INPUT OFFSET VOLTAGE VS. INPUT COMMON-MODE VOLTAGE (Vos vs. Vcm)
* INPUT/OUTPUT ESD CELLS (ESDin, ESDout)
******************************************************
.subckt THS4561 IN+ IN- VCC VEE OUT+ OUT- VOCM
******************************************************
.MODEL              R_NOISELESS RES (T_ABS=-273.15)
***                 
C_C1                MID CLAMP 1.41n
C_C10               MID N2114979 1e-15
C_C11               N2115231 MID 1e-15
C_C1a               N2115327 N2114145 1.989e-14
C_C1a1              N2114885 N2114927 3e-15
C_C1a11             N2111955 N2111989 4.685e-6
C_C1a12             N2113291 N2113331 7.958e-14
C_C1a13             MID VOCM 1.5e-12
C_C1a19             N2116903 N2116955 1.29e-14
C_C1a2              N2115007 N2115121 2.375e-16
C_C1a20             N2117625 N2117699 4.421e-15
C_C1a21             N2119079 N2119089 4.421e-15
C_C1a22             N2119415 N2119449 3.183e-15
C_C1a23             N2119981 N2119991 2.653e-16
C_C1a24             MID N2120999 4.547e-12
C_C1a25             N2112817 N2112827 9.94e-17
C_C1a26             N2113751 N2113777 7.234e-17
C_C1a27             MID N2117451 3.183e-14
C_C1a28             N2117489 N2117499 1.768e-14
C_C1a29             N2117779 N2117855 1.768e-14
C_C1a3              N2115243 N2115285 1e-16
C_C1a30             N2118417 N2118441 3.183e-16
C_C1a31             N2118761 PSRR+ 3.537e-16
C_C1a38             N2120785 N2120877 7.958e-14
C_C1a39             MID N2114057 2.5e-11
C_C1a4              MID N2115497 8.842e-14
C_C1a40             MID N2110735 1.2e-11
C_C1b               MID N2112369 7.958e-14
C_C1b1              MID N2111543 7.958e-14
C_C1b2              MID N2111751 7.958e-14
C_C33               N2116699 0 1e-15
C_C34               N2116721 0 1
C_C35               N2116851 0 1e-15
C_C37               INN MID 1e-15
C_C38               MID N2113145 5.2p
C_C7                INP MID 1e-15
C_C8                MID N2113479 1e-15
C_C9                MID N2115707 1e-15
C_C_DIFF            ESDN ESDP 2.4e-12
C_C_VIMON           MID VIMON 1e-12
C_C_VOUT_S          MID VOUT_S 1e-12
E_E3                N2119879 MID OUT+ OUT- 1
E_E6                MID 0 N2116721 0 1
E_E7                N2112217 MID ZO+ OUT- 1
E_E8                N2115339 MID VEE_CLP VCC_CLP 1
E_E9                N2114333 MID VCC_CLP VEE_CLP 1
G_G1                N2115327 MID ESDP MID -2.665e-4
G_G100              N2120785 MID N2113331 MID -3.5
G_G101              OUT- MID N2110735 MID -1m
G_G102              N2110735 MID N2114057 MID -1m
G_G103              N2110769 MID VOCM MID -1
G_G12               N2112911 MID CLAMP MID -1
G_G2                N2116317 N2116311 N2115093 MID -1e-3
G_G3                N2115007 MID N2114927 MID -21
G_G36               VCC_B 0 VCC 0 -1
G_G37               VEE_B 0 VEE 0 -1
G_G4                N2115243 MID N2115121 MID -1.833
G_G6                N2110521 N2110513 PSRR+ PSRR- -1e-3
G_G61               N2112285 MID N2111989 MID -1
G_G68               N2114057 MID N2119693 VOUT_CM -1
G_G69               ZO+ MID N2110735 MID -1m
G_G74               N2115457 MID N2115285 MID -1
G_G75               N2114885 MID N2114145 MID -2.111
G_G77               N2116903 MID VEE_B MID -4.381e-5
G_G78               N2117625 MID N2116955 MID -4.167
G_G79               N2119079 MID N2117699 MID -5.556
G_G8                VCC_CLP MID N2113479 MID -1E-3
G_G80               N2119415 MID N2119089 MID -2
G_G81               N2119981 MID N2119449 MID -8.333
G_G82               N2120867 MID N2119991 MID -1
G_G83               N2112817 MID N2113281 MID -3.125
G_G84               N2113751 MID N2112827 MID -2.273
G_G85               N2117393 MID N2113777 MID -1
G_G86               N2117489 MID VCC_B MID -1.982e-6
G_G87               N2117779 MID N2117499 MID -1.5e1
G_G88               N2118417 MID N2117855 MID -3e1
G_G89               N2118761 MID N2118441 MID -3.333e1
G_G9                VEE_CLP MID N2115707 MID -1E-3
G_G96               N2111501 MID N2111695 MID -1
G_G97               N2111709 MID N2111511 MID -1
G_G98               N2111955 MID N2113145 N2112217 -3.453e2
G_G99               N2113291 MID N2111743 MID -3.5
G_Gb3               AOLZO+ AOLZO- N2120877 MID -90.91
I_I_B               MID N2116651 DC 369.666e-9
I_I_OS              MID ESDN DC 368.333e-9
I_I_Q               VCC VEE DC 825e-6
L_L4                N2112911 N2113145 300n
R_R1                ESDP IN+ R_NOISELESS 10e-3
R_R10               ESDN N2121557 R_NOISELESS 1e-3
R_R107              VCC_B 0 R_NOISELESS 1
R_R108              N2116721 0 R_NOISELESS 1e12
R_R109              VEE_B 0 R_NOISELESS 1
R_R110              VCC_B N2116699 R_NOISELESS 1e-3
R_R111              N2116699 N2116721 R_NOISELESS 1e6
R_R112              N2116721 N2116851 R_NOISELESS 1e6
R_R113              N2116851 VEE_B R_NOISELESS 1e-3
R_R147              MID N2111955 R_NOISELESS 1
R_R148              MID N2112285 R_NOISELESS 1
R_R168              VCC_B VOCM R_NOISELESS 399.4833e3
R_R169              VOCM VEE_B R_NOISELESS 400.5167e3
R_R186              OUT- AOLZO- R_NOISELESS 2.81e5
R_R187              ZO+ AOLZO+ R_NOISELESS 2.81e5
R_R188              ZO+ OUT- R_NOISELESS 5.62e4
R_R1a               N2115327 N2114145 R_NOISELESS 1e8
R_R1a1              N2114885 N2114927 R_NOISELESS 1e8
R_R1a12             N2111989 N2111955 R_NOISELESS 10k
R_R1a16             N2116903 N2116955 R_NOISELESS 1e8
R_R1a17             N2117625 N2117699 R_NOISELESS 1e8
R_R1a18             N2119079 N2119089 R_NOISELESS 1e8
R_R1a19             N2119415 N2119449 R_NOISELESS 1e8
R_R1a2              N2115007 N2115121 R_NOISELESS 1e8
R_R1a20             N2119981 N2119991 R_NOISELESS 1e8
R_R1a21             N2112817 N2112827 R_NOISELESS 1e8
R_R1a22             N2113751 N2113777 R_NOISELESS 1e8
R_R1a23             N2117489 N2117499 R_NOISELESS 1e8
R_R1a24             N2117779 N2117855 R_NOISELESS 1e8
R_R1a25             N2118417 N2118441 R_NOISELESS 1e8
R_R1a26             N2118761 PSRR+ R_NOISELESS 1e8
R_R1a3              N2115243 N2115285 R_NOISELESS 1e8
R_R1a30             N2113331 N2113291 R_NOISELESS 10k
R_R1a31             N2120877 N2120785 R_NOISELESS 10k
R_R1a4              N2115457 N2115093 R_NOISELESS 3.5e4
R_R1a5              N2115497 N2115093 R_NOISELESS 10e3
R_R1b               N2112369 N2111695 R_NOISELESS 10k
R_R1b1              N2111543 N2111511 R_NOISELESS 10k
R_R1b2              N2111751 N2111743 R_NOISELESS 10k
R_R2                ESDN IN- R_NOISELESS 10e-3
R_R200              AOLZO- VOUT_CM R_NOISELESS 0.5
R_R201              N2121337 MID R_NOISELESS 1e9
R_R202              INN N2121501 R_NOISELESS 1e-3
R_R203              MID N2121501 R_NOISELESS 1
R_R204              MID N2110359 R_NOISELESS 1e9
R_R205              MID CLAMP R_NOISELESS 1e6
R_R208              N2115457 MID R_NOISELESS 1
R_R209              N2116903 MID R_NOISELESS 1
R_R21               N2110513 N2110521 R_NOISELESS 1e3
R_R210              N2117625 MID R_NOISELESS 1
R_R211              N2119079 MID R_NOISELESS 1
R_R212              N2119415 MID R_NOISELESS 1
R_R213              N2119981 MID R_NOISELESS 1
R_R214              N2112817 MID R_NOISELESS 1
R_R215              N2113751 MID R_NOISELESS 1
R_R216              N2117489 MID R_NOISELESS 1
R_R217              N2117779 MID R_NOISELESS 1
R_R218              N2118417 MID R_NOISELESS 1
R_R219              N2118761 MID R_NOISELESS 1
R_R224              MID N2113145 R_NOISELESS 425
R_R228              MID N2111501 R_NOISELESS 1
R_R229              MID N2111709 R_NOISELESS 1
R_R230              MID N2113291 R_NOISELESS 1
R_R231              MID N2120785 R_NOISELESS 1
R_R232              N2115327 MID R_NOISELESS 1
R_R233              N2114885 MID R_NOISELESS 1
R_R234              N2115007 MID R_NOISELESS 1
R_R235              N2115243 MID R_NOISELESS 1
R_R237              N2110797 MID R_NOISELESS 1e9
R_R238              MID N2110731 R_NOISELESS 1e9
R_R239              N2119693 MID R_NOISELESS 1
R_R240              N2110735 MID R_NOISELESS 1k
R_R241              N2110769 N2110775 24.13k
R_R242              N2110769 MID R_NOISELESS 1
R_R25               MID N2113179 R_NOISELESS 1e9
R_R26               N2115829 MID R_NOISELESS 1e9
R_R27               MID N2116545 R_NOISELESS 1
R_R28               INP N2116545 R_NOISELESS 1e-3
R_R29               N2113447 VCC_B R_NOISELESS 1e3
R_R2a               N2114145 MID R_NOISELESS 2e5
R_R2a1              N2114927 MID R_NOISELESS 9e7
R_R2a12             MID N2111989 R_NOISELESS 2.904e1
R_R2a19             N2116955 MID R_NOISELESS 2.466e5
R_R2a2              N2115121 MID R_NOISELESS 5e6
R_R2a20             N2117699 MID R_NOISELESS 3.158e7
R_R2a21             N2119089 MID R_NOISELESS 2.195e7
R_R2a22             N2119449 MID R_NOISELESS 1e8
R_R2a23             N2119991 MID R_NOISELESS 1.364e7
R_R2a24             N2120867 MID R_NOISELESS 1
R_R2a25             N2120867 N2113281 R_NOISELESS 1.667e3
R_R2a26             N2113281 N2120999 R_NOISELESS 1e4
R_R2a27             N2112827 MID R_NOISELESS 4.706e7
R_R2a28             N2113777 MID R_NOISELESS 7.857e7
R_R2a29             N2117393 MID R_NOISELESS 1
R_R2a3              N2115285 MID R_NOISELESS 1.2e8
R_R2a30             N2117393 PSRR- R_NOISELESS 1.15e5
R_R2a31             PSRR- N2117451 R_NOISELESS 1e4
R_R2a32             N2117499 MID R_NOISELESS 9.89e6
R_R2a33             N2117855 MID R_NOISELESS 7.143e6
R_R2a34             N2118441 MID R_NOISELESS 3.448e6
R_R2a35             PSRR+ MID R_NOISELESS 3.093e6
R_R2a39             MID N2113331 R_NOISELESS 4e3
R_R2a40             MID N2120877 R_NOISELESS 4e3
R_R2b               N2111695 N2112285 R_NOISELESS 8e4
R_R2b1              N2111511 N2111501 R_NOISELESS 2e4
R_R2b2              N2111743 N2111709 R_NOISELESS 1.7e4
R_R3                N2110619 N2110715 R_NOISELESS 1.5e5
R_R30               N2113479 N2113447 R_NOISELESS 1e-3
R_R31               VCC_CLP MID R_NOISELESS 1e3
R_R32               N2110459 VEE_B R_NOISELESS 1e3
R_R33               N2115707 N2110459 R_NOISELESS 1e-3
R_R34               VEE_CLP MID R_NOISELESS 1e3
R_R35               MID N2114333 R_NOISELESS 1e9
R_R36               N2114903 MID R_NOISELESS 1
R_R37               N2114979 N2114903 R_NOISELESS 1e-3
R_R38               N2115231 N2115201 R_NOISELESS 1e-3
R_R39               MID N2115201 R_NOISELESS 1
R_R40               MID N2115339 R_NOISELESS 1e9
R_R5                VOUT_CM AOLZO+ R_NOISELESS 0.5
R_R60               MID AOL1 R_NOISELESS 1e6
R_R62               MID N2112911 R_NOISELESS 1
R_R8                N2116311 N2116317 R_NOISELESS 1e3
R_R81               MID N2118801 R_NOISELESS 1e9
R_R83               MID N2119879 R_NOISELESS 1e9
R_R9                N2116317 N2110513 R_NOISELESS 1e-3
R_R_VIMON           VIMON N2118801 R_NOISELESS 100
R_R_VOUT_S          VOUT_S N2119879 R_NOISELESS 100
V_VCM_MAX           N2115829 VCC_B -1.1
V_VCM_MAX1          N2121337 VCC_B -1.1
V_VCM_MAX2          N2110797 VCC_B -1.1
V_VCM_MAX3          N2110725 N2110775 0.25m
V_VCM_MIN           N2113179 VEE_B -0.1
V_VCM_MIN1          N2110359 VEE_B -0.1
V_VCM_MIN2          N2110731 VEE_B 0.45
X_AOL_1_THS4561             INP INN MID AOL1 AOL_1_THS4561
X_AOL_2_THS4561             AOL1 MID MID CLAMP AOL_2_THS4561
X_CLAW_AMP          N2114333 N2115339 VOUT_S MID N2114903 N2115201 CLAMP_AMP_LO_THS4561
X_CLAW_SRC_THS4561          N2114979 N2115231 CLAMP MID CLAW_SRC_THS4561
X_CLAWn_THS4561             MID VIMON VEE_B N2110459 CLAWn_THS4561
X_CLAWp_THS4561             VIMON MID N2113447 VCC_B CLAWp_THS4561
X_ESD_OUT_THS4561_THS4561           OUT+ VCC VEE ESD_OUT_THS4561_THS4561
X_ESD_OUT_THS4561_THS45611          OUT- VCC VEE ESD_OUT_THS4561_THS4561
X_H3                OUT+ ZO+ N2118801 MID 08_Op_Amp_Complete_H3
X_i_nn              ESDN MID FEMT_THS4561
X_i_np              N2116651 MID FEMT_THS4561
X_IQ_N              MID VIMON MID VEE IQ_SRC_THS4561
X_IQ_P              VIMON MID VCC MID IQ_SRC_THS4561
X_S13               N2114057 MID N2114057 MID 08_Op_Amp_Complete_S13
X_S14               MID N2114057 MID N2114057 08_Op_Amp_Complete_S14
X_S15               VEE_CLP ZO+ ZO+ MID 08_Op_Amp_Complete_S15
X_S16               VEE_CLP OUT- OUT- MID 08_Op_Amp_Complete_S16
X_S17               OUT- VCC_CLP OUT- MID 08_Op_Amp_Complete_S17
X_S9                ZO+ VCC_CLP ZO+ MID 08_Op_Amp_Complete_S9
X_U1                ESDP N2116651 VNSE_THS4561
X_VCM_CLAMP_THS4561         N2110521 MID N2116545 MID N2115829 N2113179 VCM_CLAMP_THS4561
X_VCM_CLAMP_THS45611        N2121557 MID N2121501 MID N2121337 N2110359 VCM_CLAMP_THS4561
X_VCM_CLAMP_THS45612        N2110725 MID N2119693 MID N2110797 N2110731 VCM_CLAMP_THS4561
X_VOS_DRIFT_THS4561         N2181261 N2116651 VOS_DRIFT_THS4561
X_VOS_VS_VCM_THS4561        N2116311 N2181261 VCC VEE VOS_VS_VCM_THS4561
X_W1                N2110619 ESDN ESDP ESDN 08_Op_Amp_Complete_W1
X_W2                N2110715 ESDP ESDP ESDN 08_Op_Amp_Complete_W2
.ENDS THS4561

.subckt 08_Op_Amp_Complete_S16 1 2 3 4  
S_S16         3 4 1 2 _S16
RS_S16         1 2 1G
.MODEL         _S16 VSWITCH Roff=2k Ron=1 Voff=-0.1 Von=0.1
.ends 08_Op_Amp_Complete_S16

.subckt 08_Op_Amp_Complete_S9 1 2 3 4  
S_S9         3 4 1 2 _S9
RS_S9         1 2 1G
.MODEL         _S9 VSWITCH Roff=2k Ron=1 Voff=-0.1 Von=0.1
.ends 08_Op_Amp_Complete_S9

.subckt 08_Op_Amp_Complete_W2 1 2 3 4  
W_W2         3 4 VW_W2 _W2
VW_W2         1 2 0V
.MODEL         _W2 ISWITCH Roff=10Meg Ron=1 Ioff=6u Ion=6.667u
.ends 08_Op_Amp_Complete_W2

.subckt 08_Op_Amp_Complete_H3 1 2 3 4  
H_H3         3 4 VH_H3 -1e3
VH_H3         1 2 0V
.ends 08_Op_Amp_Complete_H3

.subckt 08_Op_Amp_Complete_S14 1 2 3 4  
S_S14         3 4 1 2 _S14
RS_S14         1 2 1G
.MODEL         _S14 VSWITCH Roff=270k Ron=1 Voff=11 Von=12
.ends 08_Op_Amp_Complete_S14

.subckt 08_Op_Amp_Complete_S17 1 2 3 4  
S_S17         3 4 1 2 _S17
RS_S17         1 2 1G
.MODEL         _S17 VSWITCH Roff=2k Ron=1 Voff=-0.1 Von=0.1
.ends 08_Op_Amp_Complete_S17

.subckt 08_Op_Amp_Complete_S15 1 2 3 4  
S_S15         3 4 1 2 _S15
RS_S15         1 2 1G
.MODEL         _S15 VSWITCH Roff=2k Ron=1 Voff=-0.1 Von=0.1
.ends 08_Op_Amp_Complete_S15

.subckt 08_Op_Amp_Complete_W1 1 2 3 4  
W_W1         3 4 VW_W1 _W1
VW_W1         1 2 0V
.MODEL         _W1 ISWITCH Roff=10Meg Ron=1 Ioff=6u Ion=6.667u
.ends 08_Op_Amp_Complete_W1

.subckt 08_Op_Amp_Complete_S13 1 2 3 4  
S_S13         3 4 1 2 _S13
RS_S13         1 2 1G
.MODEL         _S13 VSWITCH Roff=270k Ron=1 Voff=11 Von=12
.ends 08_Op_Amp_Complete_S13

*
.subckt AOL_1_THS4561 VC+ VC- IOUT+ IOUT-
.param Gain = 0.95e-3
.param Ipos = .5
.param Ineg = -.5
G1 IOUT+ IOUT- VALUE={LIMIT(Gain*V(VC+,VC-),Ineg,Ipos)}
.ends
*$
*
.subckt AOL_2_THS4561 VC+ VC- IOUT+ IOUT-
.param Gain = 601.5e-6
.param Ipos = 0.37183
.param Ineg = -0.371835
G1 IOUT+ IOUT- VALUE={LIMIT(Gain*V(VC+,VC-),Ineg,Ipos)}
.ends
*$
*
.subckt CLAMP_AMP_LO_THS4561 VC+ VC- VIN COM VO+ VO-
.param G=1
* Output G(COM,0) when condition not met
GVo+ COM Vo+ Value = {IF(V(VIN,COM)>V(VC+,COM),((V(VIN,COM)-V(VC+,COM))*G),0)}
GVo- COM Vo- Value = {IF(V(VIN,COM)<V(VC-,COM),((V(VC-,COM)-V(VIN,COM))*G),0)}
.ends
*$
*
.subckt CLAWn_THS4561 VC+ VC- IOUT+ IOUT-
G1 IOUT+ IOUT- TABLE {(V(VC+,VC-))} =
+(0, 0.1e-3)
+(40, 0.65e-3)
+(50, 0.899e-3)
+(51, 0.99e-3)
+(52, 2.5e-3)
+(53, 4.6e-3)
+(54, 5.6e-3)
.ends
*$
*
.subckt CLAWp_THS4561 VC+ VC- IOUT+ IOUT-
G1 IOUT+ IOUT- TABLE {(V(VC+,VC-))} =
+(0.00, 0.02e-3)
+(15, 0.43e-3)
+(25, 0.672e-3)
+(32, 0.989e-3)
+(37, 1.38e-3)
+(42, 2.31e-3)
+(44, 3.03e-3)
+(46, 4.118e-3)
+(48, 5.8e-3)
.ends
*$
*
.subckt CLAW_SRC_THS4561 VC+ VC- IOUT+ IOUT-
.param Gain = 40
.param Ipos = 20
.param Ineg = -20
G1 IOUT+ IOUT- VALUE={LIMIT(Gain*V(VC+,VC-),Ineg,Ipos)}
.ends
*$
*
.subckt ESD_OUT_THS4561_THS4561 OUT VCC VEE
.model ESD_SW VSWITCH(Ron=50 Roff=1e12 Von=500e-3 Voff=450e-3)
S1 VCC OUT OUT VCC ESD_SW
S2 OUT VEE VEE OUT ESD_SW
.ends
*$
* FEMT_THS4561 - input current noise in fA/rt-Hz
.subckt FEMT_THS4561 1 2
* Input variables
* Set up 1/f noise
* FLWF = 1/f frequency in Hz
.param FLWF=1
* NLFF = current noise density at 1/f frequency in fA/rt(Hz)
.param NLFF=6.01e3
* Set up broadband noise
* NVRF = broadband current noise density in fA/rt(Hz)
.param NVRF=250.6
* Calculated values
.param GLFF={PWR(FLWF,0.25)*NLFF/1164}
.param RNVF={1.184*PWR(NVRF,2)}
.model DVNF D KF={PWR(FLWF,0.5)/1e11} IS=1.0e-16
* Circuit connections
I1 0 7 10e-3
I2 0 8 10e-3
D1 7 0 DVNF
D2 8 0 DVNF
E1 3 6 7 8 {GLFF}
R1 3 0 1e9
R2 3 0 1e9
R3 3 6 1e9
E2 6 4 5 0 10
R4 5 0 {RNVF}
R5 5 0 {RNVF}
R6 3 4 1e9
R7 4 0 1e9
G1 1 2 3 4 1e-6
.ends
*$
*
.subckt IQ_SRC_THS4561 VC+ VC- IOUT+ IOUT-
.param Gain = 1e-3
G1 IOUT+ IOUT- VALUE={IF( (V(VC+,VC-)<=0),0,Gain*V(VC+,VC-) )}
.ends
*$
*
.subckt VCM_CLAMP_THS4561 VIN+ VIN- IOUT- IOUT+ VP+ VP-
.param Gain = 1
G1 IOUT+ IOUT- VALUE={LIMIT(Gain*V(VIN+,VIN-),V(VP-,VIN-), V(VP+,VIN-))}
.ends
*$
*
.subckt VNSE_THS4561 1 2
.param FLW=1
.param NLF=5.41
.param NVR=1.91
.param GLF={PWR(FLW,0.25)*NLF/1164}
.param RNV={1.184*PWR(NVR,2)}
.model DVN D KF={PWR(FLW,0.5)/1E11} IS=1.0E-16
* Circuit connections
I1 0 7 10E-3
I2 0 8 10E-3
D1 7 0 DVN
D2 8 0 DVN
E1 3 6 7 8 {GLF}
R1 3 0 1E9
R2 3 0 1E9
R3 3 6 1E9
E2 6 4 5 0 10
R4 5 0 {RNV}
R5 5 0 {RNV}
R6 3 4 1E9
R7 4 0 1E9
E3 1 2 3 4 1
.ends
*$
*
.subckt VOS_DRIFT_THS4561 VOS+ VOS-
.param DC = 48.253e-6
.param POL = 1
.param DRIFT = 0.5e-6
E1 VOS+ VOS- VALUE={DC+POL*DRIFT*(TEMP-27)}
.ends
*$
*
.subckt VOS_VS_VCM_THS4561 V+ V- REF+ REF-
* Positive rail Vos
E1 V+ 1 TABLE {(V(REF+, V-))} =
+(0.35, 450e-6)
+(0.4, 435e-6)
+(0.55, 275e-6)
+(0.65, 150e-6)
+(0.75, 75e-6)
+(0.85, 25e-6)
+(1, 0)
* Negative rail Vos
V1 1 V- 0
.ends
*$
*
*$
*
.model Dbreak D Is=1e-14 Cjo=.1pF Rs=.1
*$
*
*$
